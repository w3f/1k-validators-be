environment: production

image:
  repo: web3f/otv-backend
  #tag: latest

domain: otv.w3f.community

# mono, microservices
architecture: microservices

port: 3300
certificate:
  enabled: true

core:
  image:
    repo: web3f/otv-backend
    #tag: latest
  storageSize: 20Gi
  resources:
    limits:
      cpu: 600m
      memory: 1Gi
    requests:
      cpu: 300m
      memory: 400Mi
  secret: |
    {
      "matrix": {
          "accessToken": "xxxxx"
      },
      "scorekeeper": {
          "nominators": []
      }
    }
  config: |
    {
      "global": {
        "dryRun": false,
        "networkPrefix": 2,
        "test": false,
        "retroactive": false,
        "historicalNominations": false,
        "apiEndpoints": [
          "wss://kusama-rpc.polkadot.io"
        ],
        "bootstrap": false,
        "kusamaBootstrapEndpoint": "https://kusama.w3f.community",
        "polkadotBootstrapEndpoint": "https://polkadot.w3f.community",
        "candidatesUrl": "https://raw.githubusercontent.com/w3f/1k-validators-be/master/candidates/kusama.json"
      },
      "constraints": {
        "skipConnectionTime": true,
        "skipIdentity": false,
        "skipStakedDestination": true,
        "skipClientUpgrade": false,
        "skipUnclaimed": false,
        "forceClientVersion": "v0.9.30",
        "minSelfStake": 10000000000000,
        "commission": 150000000,
        "unclaimedEraThreshold": 4
      },
      "db": {
        "migrate": false,
        "mongo": {
          "uri": "mongodb://mongo:27017",
          "dbName": "otv",
          "collection": "otv"
        },
        "storageFile": "validator.db"
      },
      "matrix": {
        "enabled": false,
        "baseUrl": "https://matrix.org",
        "room": "!mdugGIKqSTweIOpTlA:web3.foundation",
        "userId": "@1kv-stats:matrix.org"
      },
      "proxy": {
        "timeDelayBlocks": "10850",
        "blacklistedAnnouncements": []
      },
      "score": {
        "inclusion": "200",
        "spanInclusion": "200",
        "discovered": "5",
        "nominated": "30",
        "rank": "5",
        "bonded": "50",
        "faults": "5",
        "offline": "2",
        "location": "40",
        "region": "10",
        "country": "10",
        "provider": "100",
        "council": "50",
        "democracy": "100",
        "nominations": "100",
        "delegations": "60",
        "openGov": "100",
        "openGovDelegation": "100"
      },
      "scorekeeper": {
        "forceRound": false,
        "nominating": false
      },
      "redis": {
        "host": "redis",
        "port": 6379
      },
      "server": {
        "enable": false,
        "port": 3300
      },
      "telemetry": {
        "blacklistedProviders": [
          "Hetzner Online GmbH",
          "Contabo Inc.",
          "Contabo GmbH"
        ],
        "enable": false,
        "chains": [
          "0xb0a8d493285c2df73290dfb7e61f870f17b41801197a149ca93654499ea3dafe"
        ],
        "host": "wss://telemetry-backend.w3f.community/feed"
      }
    }


gateway:
  image:
    repo: web3f/otv-gateway
    #tag: latest
  resources:
    limits:
      cpu: 300m
      memory: 300Gi
    requests:
      cpu: 100m
      memory: 100Mi  
  config: |
    {
      "db": {
        "migrate": false,
        "mongo": {
          "uri": "mongodb://mongo:27017",
          "dbName": "otv",
          "collection": "otv"
        },
        "storageFile": "validator.db"
      },
      "redis": {
        "host": "redis",
        "port": 6379
      },
      "server": {
        "enable": true,
        "port": 3301
      }
    } 

telemetry:
  image:
    repo: web3f/otv-telemetry
    #tag: latest
  resources:
    limits:
      cpu: 300m
      memory: 300Gi
    requests:
      cpu: 100m
      memory: 100Mi  
  config: |
    {
      "db": {
        "migrate": false,
        "mongo": {
          "uri": "mongodb://mongo:27017",
          "dbName": "otv",
          "collection": "otv"
        },
        "storageFile": "validator.db"
      },
      "telemetry": {
        "blacklistedProviders": [
          "Hetzner Online GmbH",
          "Contabo Inc.",
          "Contabo GmbH"
        ],
        "enable": true,
        "chains": [
          "0xb0a8d493285c2df73290dfb7e61f870f17b41801197a149ca93654499ea3dafe"
        ],
        "host": "wss://telemetry-backend.w3f.community/feed"
      }
    }

worker:
  image:
    repo: web3f/otv-worker
    #tag: latest
  resources:
    limits:
      cpu: 300m
      memory: 300Gi
    requests:
      cpu: 100m
      memory: 100Mi  
  config: |
    {
      "global": {
        "apiEndpoints": [
          "wss://kusama-rpc.polkadot.io",
          "wss://kusama-rpc.dwellir.com",
          "wss://kusama.public.curie.radiumblock.xyz/ws"
        ]
      },
      "db": {
        "migrate": false,
        "mongo": {
          "uri": "mongodb://mongo:27017",
          "dbName": "otv",
          "collection": "otv"
        },
        "storageFile": "validator.db"
      },
      "score": {
        "inclusion": "200",
        "spanInclusion": "200",
        "discovered": "5",
        "nominated": "30",
        "rank": "5",
        "bonded": "50",
        "faults": "5",
        "offline": "2",
        "location": "40",
        "region": "10",
        "country": "10",
        "provider": "100",
        "council": "50",
        "democracy": "100",
        "nominations": "100",
        "delegations": "60",
        "openGov": "100",
        "openGovDelegation": "100"
      },
      "redis": {
        "host": "redis",
        "port": 6379
      }
    }
          